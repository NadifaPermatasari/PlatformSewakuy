<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">

    <title>Sewakuy</title>
  </head>

  <body style="background-color: #F1F1F6;">

<!-- ======================= NAVBAR ======================= -->
<nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm fixed-top"
     style="font-family: cursive; font-size: large; font-weight: bold; width: 100%; z-index: 1000;">

  <div class="container py-1">

    <!-- Logo -->
    <a class="navbar-brand d-flex align-items-center" href="#">
        <img src="assets/logo.png" alt="Sewakuy Logo"
             style="height: 38px; width: auto; margin-right: 8px;">
        Sewakuy
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarNav" aria-controls="navbarNav"
            aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">

      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link active" href="#home">Beranda</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#category">Kategori</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#about">Tentang</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#contact">Kontak</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-primary" href="seller.html">Seller View</a>
        </li>
      </ul>

    </div>

  </div>
</nav>
<!-- ======================= END NAVBAR ======================= -->

<!-- ======================= HOME SECTION ======================= -->
<section id="home" style="margin-top: 70px;">
    <div class="container-fluid p-0">

        <video autoplay muted loop class="w-100" style="object-fit: cover; height: 100vh;">
            <source src="assets/Bg.mp4">
        </video>

        <div class="position-absolute top-50 start-50 translate-middle text-center text-dark" style="font-family: monospace; width: 100%;">
            <h1 class="fw-bold">Sewa Barang Jadi Mudah, dari Mahasiswa untuk Mahasiswa</h1>
            <p>Platform penyewaan barang untuk kebutuhan kuliah, kos, hingga event kampus.</p>

            <!-- Rent & Add Button -->
            <div class="d-flex justify-content-center gap-3 mt-3">

                <button id="rentBtn" type="button" class="btn btn-secondary"
                        style="font-family: monospace; height: 1.2cm; width: 5cm; font-weight: bolder;">
                    Sewa Sekarang
                </button>

                <button id="addBtn" type="button" class="btn btn-secondary"
                        style="font-family: monospace; height: 1.2cm; width: 5cm; font-weight: bolder;">
                    Daftarkan Barangmu
                </button>

            </div>

        </div>
    </div>
</section>
<!-- ======================= END HOME ======================= -->

<!-- ======================= MODAL RENT ======================= -->
<div class="modal fade" id="rentModal" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-scrollable modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title fw-bold">ðŸ“¦ Form Penyewaan Barang</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">

        <form id="rentForm">

          <h6 class="fw-bold mb-2">1. Data Peminjam</h6>

          <div class="mb-3">
            <label class="form-label">Nama Lengkap</label>
            <input type="text" class="form-control" required>
          </div>

          <div class="mb-3">
            <label class="form-label">NRP</label>
            <input type="text" class="form-control" required>
          </div>

          <div class="mb-3">
            <label class="form-label">Kontak (WA/Email)</label>
            <input type="text" class="form-control" required>
          </div>

          <hr>

          <h6 class="fw-bold mb-2">2. Detail Penyewaan</h6>

          <div class mb-3>
            <label class="form-label">Nama Barang</label>
            <input type="text" id="namaBarangRent" class="form-control" required>
          </div>

          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">Tanggal Mulai</label>
              <input type="date" class="form-control" required>
            </div>

            <div class="col-md-6 mb-3">
              <label class="form-label">Tanggal Selesai</label>
              <input type="date" class="form-control" required>
            </div>
          </div>

          <button type="submit" class="btn btn-primary w-100">Sewa Sekarang</button>

        </form>

      </div>

    </div>
  </div>
</div>

<!-- ======================= MODAL ADD ITEM ======================= -->
<div class="modal fade" id="addModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title fw-bold">ðŸ›’ Tambah Barang Sewa</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">

        <form id="addForm">

          <!-- IDENTITAS MAHASISWA -->
          <h6 class="fw-bold mb-2">1. Identitas Mahasiswa</h6>

          <div class="mb-3">
            <label class="form-label">Nama Lengkap</label>
            <input type="text" id="mhsNama" class="form-control" required>
          </div>

          <div class="mb-3">
            <label class="form-label">NRP</label>
            <input type="text" id="mhsNRP" class="form-control" required>
          </div>

          <div class="mb-3">
            <label class="form-label">Program Studi / Fakultas</label>
            <input type="text" id="mhsProdi" class="form-control" required>
          </div>

          <div class="mb-3">
            <label class="form-label">Upload Foto KTM</label>
            <input type="file" id="mhsKTM" class="form-control" accept="image/*" required>
          </div>

          <div class="mb-3">
            <label class="form-label">Kontak WA / Email Kampus</label>
            <input type="text" id="mhsKontak" class="form-control" required>
          </div>

          <hr>

          <!-- INFORMASI BARANG -->
          <h6 class="fw-bold mb-2">2. Informasi Barang</h6>

          <div class="mb-3">
            <label class="form-label">Nama Barang</label>
            <input type="text" id="barangNama" class="form-control" required>
          </div>

          <div class="mb-3">
            <label class="form-label">Kategori Barang</label>
            <select id="barangKategori" class="form-select" required>
              <option selected disabled>Pilih Kategori</option>
              <option>Peralatan Elektronik</option>
              <option>Peralatan Hobi</option>
              <option>Aksesoris Pendukung</option>
              <option>Peralatan Teknologi</option>
              <option>Lainnya</option>
            </select>
          </div>

          <div class="mb-3">
            <label class="form-label">Deskripsi Barang</label>
            <textarea id="barangDeskripsi" class="form-control" rows="3"></textarea>
          </div>

          <div class="mb-3">
            <label class="form-label">Kondisi Barang</label>
            <select id="barangKondisi" class="form-select">
              <option>Baru</option>
              <option>Sangat Baik</option>
              <option>Baik</option>
              <option>Layak</option>
            </select>
          </div>

          <div class="mb-3">
            <label class="form-label">Aturan Penggunaan</label>
            <textarea id="barangAturan" class="form-control" rows="2"></textarea>
          </div>

          <hr>

          <!-- HARGA & SKEMA SEWA -->
          <h6 class="fw-bold mb-2">3. Harga & Ketersediaan</h6>

          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">Harga Sewa / Hari</label>
              <input type="number" id="barangHarga" class="form-control" required>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Deposit / Jaminan</label>
              <input type="number" id="barangDeposit" class="form-control">
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label">Stok Barang</label>
            <input type="number" id="barangStok" class="form-control" required>
          </div>

          <hr>

          <!-- FOTO BARANG -->
          <h6 class="fw-bold mb-2">4. Foto Barang</h6>

          <div class="mb-3">
            <label class="form-label">Upload Foto (2â€“4 Foto)</label>
            <input type="file" id="barangFoto" class="form-control" accept="image/*" multiple required>
          </div>

          <hr>

          <!-- LOKASI -->
          <h6 class="fw-bold mb-2">5. Lokasi Pengambilan</h6>

          <div class="mb-3">
            <label class="form-label">Lokasi Penjemputan</label>
            <input type="text" id="barangLokasi" class="form-control" required>
          </div>

          <div class="mb-3">
            <label class="form-label">Catatan Penjemputan</label>
            <textarea id="barangCatatan" class="form-control" rows="2"></textarea>
          </div>

          <hr>

          <!-- PERSETUJUAN -->
          <div class="form-check mb-2">
            <input id="agree1" class="form-check-input" type="checkbox" required>
            <label class="form-check-label">Saya setuju dengan ketentuan platform.</label>
          </div>

          <div class="form-check mb-3">
            <input id="agree2" class="form-check-input" type="checkbox" required>
            <label class="form-check-label">Saya bertanggung jawab jika barang hilang/rusak.</label>
          </div>

          <button type="submit" class="btn btn-success w-100">Tambah Barang</button>

        </form>

      </div>

    </div>
  </div>
</div>

<script>
// ==================== SHOW MODALS ====================
document.getElementById("rentBtn").onclick = () => {
    new bootstrap.Modal(document.getElementById("rentModal")).show();
};

document.getElementById("addBtn").onclick = () => {
    new bootstrap.Modal(document.getElementById("addModal")).show();
};

// ==================== SAVE ADDED ITEM ====================
document.getElementById("addForm").addEventListener("submit", function(e){
  e.preventDefault();

  const newItem = {
    id: "BRG-" + Date.now(),

    // IDENTITAS MAHASISWA
    mhsNama: document.getElementById("mhsNama").value,
    mhsNRP: document.getElementById("mhsNRP").value,
    mhsProdi: document.getElementById("mhsProdi").value,
    mhsKontak: document.getElementById("mhsKontak").value,

    // KTM (base64)
    mhsKTM: document.getElementById("mhsKTM").files[0]
      ? URL.createObjectURL(document.getElementById("mhsKTM").files[0])
      : null,

    // INFORMASI BARANG
    nama: document.getElementById("barangNama").value,
    kategori: document.getElementById("barangKategori").value,
    deskripsi: document.getElementById("barangDeskripsi").value,
    kondisi: document.getElementById("barangKondisi").value,
    aturan: document.getElementById("barangAturan").value,

    // HARGA & STOK
    harga: parseInt(document.getElementById("barangHarga").value),
    deposit: parseInt(document.getElementById("barangDeposit").value) || 0,
    stok: parseInt(document.getElementById("barangStok").value),

    // FOTO BARANG multiple
    foto: Array.from(document.getElementById("barangFoto").files).map(file => URL.createObjectURL(file)),

    // LOKASI
    lokasi: document.getElementById("barangLokasi").value,
    catatan: document.getElementById("barangCatatan").value,

    status: "Tersedia",
    tanggalInput: new Date().toISOString()
  };

  // SIMPAN DI LOCALSTORAGE
  const allItems = JSON.parse(localStorage.getItem("sellerItems")) || [];
  allItems.push(newItem);
  localStorage.setItem("sellerItems", JSON.stringify(allItems));

  alert("Barang berhasil ditambahkan!");
  bootstrap.Modal.getInstance(document.getElementById("addModal")).hide();
});


// ==================== SAVE RENT TRANSACTION ====================
document.getElementById("rentForm").addEventListener("submit", function(event) {
    event.preventDefault();

    const penyewa = document.querySelector("#rentForm input:nth-of-type(1)").value;
    const nrp = document.querySelector("#rentForm input:nth-of-type(2)").value;
    const kontak = document.querySelector("#rentForm input:nth-of-type(3)").value;
    const namaBarang = document.getElementById("namaBarangRent").value;

    const tglMulai = document.querySelector("#rentForm input[type='date']:nth-of-type(1)").value;
    const tglSelesai = document.querySelector("#rentForm input[type='date']:nth-of-type(2)").value;

    let sellerItems = JSON.parse(localStorage.getItem("sellerItems")) || [];
    const item = sellerItems.find(i => i.nama === namaBarang);

    if (!item) {
        alert("Barang tidak ditemukan dalam database seller!");
        return;
    }

    const history = JSON.parse(localStorage.getItem("rentalHistory")) || [];

    history.push({
        rentId: "RENT-" + Date.now(),
        itemId: item.id,
        penyewa: penyewa,
        nrp: nrp,
        kontak: kontak,
        tglMulai: tglMulai,
        tglSelesai: tglSelesai,
        status: "Sedang Disewa"
    });

    localStorage.setItem("rentalHistory", JSON.stringify(history));

    alert("Penyewaan berhasil dicatat!");

    bootstrap.Modal.getInstance(document.getElementById("rentModal")).hide();
});
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

  </body>
</html>

